import{u as X}from"./useApi-DEBD0yG7.js";import{d as Z,r as M,p as y,o as ss,b as l,c as v,e as c,f as e,g as p,i as f,w as t,k as n,j as o,t as i,F as T,s as O,v as es,J as ts,m as os}from"./app-BQBzBluS.js";import{u as rs}from"./scenarioPlanningScenariosStore-DvAo8lLm.js";import"./apiHelper-CL77IM7H.js";const as={class:"succession-plan-card"},is={class:"text-h5 font-weight-bold"},ls={class:"text-h5 font-weight-bold text-success"},ns={class:"text-h5 font-weight-bold text-error"},cs={class:"text-h5 font-weight-bold text-primary"},ds={class:"d-flex align-center"},us={class:"flex-grow-1"},_s={class:"font-weight-bold"},ms={class:"text-caption text-medium-emphasis"},vs={class:"mb-3"},ps={key:0,class:"mt-2"},fs={class:"d-flex align-center"},xs={class:"flex-grow-1"},ys={class:"font-weight-bold"},gs={class:"text-caption"},bs={key:1,class:"text-error text-body2 mt-2"},hs={key:0,class:"mb-3"},ws={class:"d-flex align-center"},ks={class:"flex-grow-1"},Cs={class:"text-body2 font-weight-bold"},Ss={class:"text-caption"},Rs={class:"mt-4 border-t pt-3"},Ps={class:"font-weight-bold"},As={class:"text-caption text-medium-emphasis"},Ns={class:"text-body2 font-weight-bold"},zs={class:"text-body2 font-weight-bold"},Es={class:"font-weight-bold mb-2"},Ds={class:"text-body2"},Vs={class:"text-body2"},Is={class:"text-body2"},Ms=Z({__name:"SuccessionPlanCard",props:{scenarioId:{}},setup($){const z=$;X();const{showSuccess:B}=ts(),w=rs(),d=M(null),k=M(!1),L=y(()=>w.getLoadingState("succession")),R=y(()=>w.getError("succession")),g=y(()=>w.getSuccessionPlans(z.scenarioId)),U=y(()=>{const r=g.value;return Array.isArray(r)?r.filter(s=>s.primary_successor&&s.primary_successor.readiness>=80).length:0}),j=y(()=>{const r=g.value;return Array.isArray(r)?r.filter(s=>!s.primary_successor||s.primary_successor&&(s.months_to_retirement??0)<6).length:0}),F=y(()=>{const r=g.value;if(!Array.isArray(r)||r.length===0)return 0;const s=r.reduce((b,h)=>b+(h.primary_successor?.readiness||0),0);return Math.round(s/r.length)}),H=async()=>{await w.fetchSuccessionPlans(z.scenarioId)},Y=r=>{d.value=r,k.value=!0},J=r=>{B(`Editing succession plan for ${r.role_name}`)},E=r=>r.split(" ").map(s=>s[0]).join("").toUpperCase(),q=r=>!r.primary_successor||r.primary_successor.readiness<50?"error":r.primary_successor.readiness<80?"warning":"success",G=r=>r.primary_successor?r.primary_successor.readiness<50?"High Risk":r.primary_successor.readiness<80?"Medium Risk":"Ready":"At Risk";return ss(()=>{H()}),L.value,(r,s)=>{const b=l("v-icon"),h=l("v-card-title"),K=l("v-card-subtitle"),x=l("v-divider"),u=l("v-card"),_=l("v-col"),C=l("v-row"),S=l("v-card-text"),P=l("v-chip"),D=l("v-avatar"),A=l("v-progress-linear"),N=l("v-btn"),V=l("v-spacer"),I=l("v-card-actions"),Q=l("v-dialog"),W=l("v-alert");return c(),v("div",as,[e(u,{class:"mb-4"},{default:t(()=>[e(h,{class:"d-flex align-center"},{default:t(()=>[e(b,{left:""},{default:t(()=>[...s[3]||(s[3]=[n("mdi-crown",-1)])]),_:1}),s[4]||(s[4]=n(" Succession Planning ",-1))]),_:1}),e(K,null,{default:t(()=>[...s[5]||(s[5]=[n(" Critical role succession strategies and successor readiness ",-1)])]),_:1}),e(x),e(S,{class:"pb-0"},{default:t(()=>[e(C,{class:"mb-4"},{default:t(()=>[e(_,{cols:"6",md:"3"},{default:t(()=>[e(u,{variant:"outlined",class:"pa-3 text-center"},{default:t(()=>[s[6]||(s[6]=o("div",{class:"text-caption"},"Critical Roles",-1)),o("div",is,i(g.value.length),1)]),_:1})]),_:1}),e(_,{cols:"6",md:"3"},{default:t(()=>[e(u,{variant:"outlined",class:"pa-3 text-center"},{default:t(()=>[s[7]||(s[7]=o("div",{class:"text-caption"},"Ready Now",-1)),o("div",ls,i(U.value),1)]),_:1})]),_:1}),e(_,{cols:"6",md:"3"},{default:t(()=>[e(u,{variant:"outlined",class:"pa-3 text-center"},{default:t(()=>[s[8]||(s[8]=o("div",{class:"text-caption"},"At Risk",-1)),o("div",ns,i(j.value),1)]),_:1})]),_:1}),e(_,{cols:"6",md:"3"},{default:t(()=>[e(u,{variant:"outlined",class:"pa-3 text-center"},{default:t(()=>[s[9]||(s[9]=o("div",{class:"text-caption"},"Avg Readiness",-1)),o("div",cs,i(F.value)+"% ",1)]),_:1})]),_:1})]),_:1})]),_:1}),e(x),e(S,null,{default:t(()=>[e(C,null,{default:t(()=>[(c(!0),v(T,null,O(g.value,a=>(c(),p(_,{key:a.id,cols:"12",md:"6",lg:"4"},{default:t(()=>[e(u,{class:es(["role-card",{"at-risk":a.criticality_level==="critical"&&!a.primary_successor}]),variant:"outlined"},{default:t(()=>[e(h,{class:"pb-2"},{default:t(()=>[o("div",ds,[o("div",us,[o("div",_s,i(a.role_name),1),o("div",ms,i(a.current_holder),1)]),e(P,{color:q(a),"text-color":"white",size:"x-small"},{default:t(()=>[n(i(G(a)),1)]),_:2},1032,["color"])])]),_:2},1024),e(x),e(S,{class:"pt-3"},{default:t(()=>[o("div",vs,[s[13]||(s[13]=o("div",{class:"text-caption font-weight-bold"}," PRIMARY SUCCESSOR ",-1)),a.primary_successor?(c(),v("div",ps,[e(u,{variant:"flat",color:"success-light",class:"pa-3"},{default:t(()=>[o("div",fs,[e(D,{size:"32",color:"success",class:"mr-2"},{default:t(()=>[n(i(E(a.primary_successor.name)),1)]),_:2},1024),o("div",xs,[o("div",ys,i(a.primary_successor.name),1),o("div",gs," Readiness: "+i(a.primary_successor.readiness)+"% ",1)]),a.primary_successor.readiness>=80?(c(),p(b,{key:0,color:"success",size:"small"},{default:t(()=>[...s[10]||(s[10]=[n(" mdi-check-circle ",-1)])]),_:1})):f("",!0)]),e(A,{value:a.primary_successor.readiness,color:"success",height:"4",class:"mt-2"},null,8,["value"])]),_:2},1024)])):(c(),v("div",bs,[e(b,{size:"small"},{default:t(()=>[...s[11]||(s[11]=[n("mdi-alert-circle",-1)])]),_:1}),s[12]||(s[12]=n(" No successor identified ",-1))]))]),a.secondary_successors&&a.secondary_successors.length>0?(c(),v("div",hs,[s[14]||(s[14]=o("div",{class:"text-caption font-weight-bold"}," SECONDARY SUCCESSORS ",-1)),(c(!0),v(T,null,O(a.secondary_successors,m=>(c(),v("div",{key:m.id,class:"mt-2"},[e(u,{variant:"flat",color:"info-light",class:"pa-2"},{default:t(()=>[o("div",ws,[e(D,{size:"24",color:"info",class:"mr-2"},{default:t(()=>[n(i(E(m.name)),1)]),_:2},1024),o("div",ks,[o("div",Cs,i(m.name),1),e(A,{value:m.readiness,color:"info",height:"3",class:"mt-1"},null,8,["value"])]),o("span",Ss,i(m.readiness)+"%",1)])]),_:2},1024)]))),128))])):f("",!0),o("div",Rs,[s[16]||(s[16]=o("div",{class:"text-caption font-weight-bold mb-2"}," DEVELOPMENT ACTIONS ",-1)),a.development_plan?(c(),p(P,{key:0,color:"primary","text-color":"white",size:"small",class:"mr-1","prepend-icon":"mdi-school"},{default:t(()=>[n(" Training "+i(a.development_plan.duration),1)]),_:2},1024)):f("",!0),a.mentoring_assigned?(c(),p(P,{key:1,color:"primary","text-color":"white",size:"small",class:"mr-1","prepend-icon":"mdi-human-greeting"},{default:t(()=>[...s[15]||(s[15]=[n(" Mentoring ",-1)])]),_:1})):f("",!0)])]),_:2},1024),e(x),e(I,null,{default:t(()=>[e(N,{onClick:m=>Y(a),size:"small",variant:"text"},{default:t(()=>[...s[17]||(s[17]=[n(" Details ",-1)])]),_:1},8,["onClick"]),e(V),e(N,{onClick:m=>J(a),size:"small",variant:"text",color:"primary"},{default:t(()=>[...s[18]||(s[18]=[n(" Edit ",-1)])]),_:1},8,["onClick"])]),_:2},1024)]),_:2},1032,["class"])]),_:2},1024))),128))]),_:1})]),_:1})]),_:1}),e(Q,{modelValue:k.value,"onUpdate:modelValue":s[1]||(s[1]=a=>k.value=a),"max-width":"600px"},{default:t(()=>[d.value?(c(),p(u,{key:0},{default:t(()=>[e(h,null,{default:t(()=>[n(i(d.value.role_name)+" - Succession Plan",1)]),_:1}),e(x),e(S,{class:"pt-4"},{default:t(()=>[s[24]||(s[24]=o("h4",{class:"mb-2"},"Current Holder",-1)),e(u,{variant:"outlined",class:"pa-3 mb-4"},{default:t(()=>[o("div",Ps,i(d.value.current_holder),1),o("div",As," Tenure: "+i(d.value.tenure_years)+" years ",1)]),_:1}),s[25]||(s[25]=o("h4",{class:"mb-2"},"Timeline",-1)),e(u,{variant:"outlined",class:"pa-3 mb-4"},{default:t(()=>[e(C,null,{default:t(()=>[e(_,{cols:"6"},{default:t(()=>[s[19]||(s[19]=o("div",{class:"text-caption text-medium-emphasis"}," Planned Retirement ",-1)),o("div",Ns,i(d.value.planned_retirement),1)]),_:1}),e(_,{cols:"6"},{default:t(()=>[s[20]||(s[20]=o("div",{class:"text-caption text-medium-emphasis"}," Months to Prepare ",-1)),o("div",zs,i(d.value.months_to_retirement),1)]),_:1})]),_:1})]),_:1}),s[26]||(s[26]=o("h4",{class:"mb-2"},"Primary Successor",-1)),d.value.primary_successor?(c(),p(u,{key:0,variant:"outlined",class:"pa-3 mb-4"},{default:t(()=>[o("div",Es,i(d.value.primary_successor.name),1),e(C,{class:"mb-3"},{default:t(()=>[e(_,{cols:"6"},{default:t(()=>[s[21]||(s[21]=o("div",{class:"text-caption text-medium-emphasis"}," Readiness ",-1)),e(A,{value:d.value.primary_successor.readiness,color:"primary",class:"mb-2"},null,8,["value"]),o("div",Ds,i(d.value.primary_successor.readiness)+"% ",1)]),_:1}),e(_,{cols:"6"},{default:t(()=>[s[22]||(s[22]=o("div",{class:"text-caption text-medium-emphasis"}," Current Role ",-1)),o("div",Vs,i(d.value.primary_successor.current_role),1)]),_:1})]),_:1}),s[23]||(s[23]=o("div",{class:"text-caption text-medium-emphasis"}," Development Plan ",-1)),o("div",Is,i(d.value.development_plan?.description),1)]),_:1})):f("",!0)]),_:1}),e(x),e(I,null,{default:t(()=>[e(V),e(N,{onClick:s[0]||(s[0]=a=>k.value=!1),variant:"text"},{default:t(()=>[...s[27]||(s[27]=[n("Close",-1)])]),_:1})]),_:1})]),_:1})):f("",!0)]),_:1},8,["modelValue"]),R.value?(c(),p(W,{key:0,type:"error",text:R.value,closable:"","onClick:close":s[2]||(s[2]=a=>R.value=null)},null,8,["text"])):f("",!0)])}}}),Ls=os(Ms,[["__scopeId","data-v-ded80cec"]]);export{Ls as default};
