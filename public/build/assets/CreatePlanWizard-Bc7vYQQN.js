import{d as U,_ as C,r as n,b as P,c as k,g as B,e as o,w as t,j as m,k as _,K as D,J as E}from"./app-B4Q7DtOZ.js";import{u as q}from"./useScenarioPlanning-Ca158bzr.js";import"./useApi-D-wG6FEk.js";import"./apiHelper-BLoNXDsG.js";const S={class:"pa-4"},J=U({layout:C,__name:"CreatePlanWizard",setup(T){const{showSuccess:c,showError:p}=E(),{createPlan:v}=q(),l=_({organization_id:void 0,name:"",code:"",description:"",start_date:"",end_date:"",planning_horizon_months:12,scope_type:"organization_wide",scope_notes:"",owner_user_id:void 0,sponsor_user_id:void 0,created_by:void 0}),i=_(!1),f=async()=>{i.value=!0;try{const u=await v(l.value),e=u?.data||u;c("Plan creado"),D.visit(`/scenario-planning/${e.id}`)}catch(u){const e=u?.response?.data?.message||"No fue posible crear el plan";p(e)}finally{i.value=!1}};return(u,e)=>{const s=n("v-text-field"),d=n("v-col"),V=n("v-select"),r=n("v-row"),b=n("v-textarea"),g=n("v-card-text"),y=n("v-spacer"),w=n("v-icon"),x=n("v-btn"),z=n("v-card-actions"),N=n("v-card");return P(),k("div",S,[e[10]||(e[10]=B("h2",null,"Nuevo Escenario de Dotación",-1)),o(N,{class:"mt-4"},{default:t(()=>[o(g,null,{default:t(()=>[o(r,null,{default:t(()=>[o(d,{cols:"12",md:"6"},{default:t(()=>[o(s,{label:"Nombre",modelValue:l.value.name,"onUpdate:modelValue":e[0]||(e[0]=a=>l.value.name=a),required:""},null,8,["modelValue"])]),_:1}),o(d,{cols:"12",md:"3"},{default:t(()=>[o(s,{label:"Código",modelValue:l.value.code,"onUpdate:modelValue":e[1]||(e[1]=a=>l.value.code=a),required:""},null,8,["modelValue"])]),_:1}),o(d,{cols:"12",md:"3"},{default:t(()=>[o(V,{label:"Ámbito",items:[{title:"Organización",value:"organization_wide"},{title:"Unidad de Negocio",value:"business_unit"},{title:"Departamento",value:"department"},{title:"Roles Críticos",value:"critical_roles_only"}],modelValue:l.value.scope_type,"onUpdate:modelValue":e[2]||(e[2]=a=>l.value.scope_type=a)},null,8,["modelValue"])]),_:1})]),_:1}),o(r,null,{default:t(()=>[o(d,{cols:"12"},{default:t(()=>[o(b,{label:"Descripción",modelValue:l.value.description,"onUpdate:modelValue":e[3]||(e[3]=a=>l.value.description=a)},null,8,["modelValue"])]),_:1})]),_:1}),o(r,null,{default:t(()=>[o(d,{cols:"12",md:"3"},{default:t(()=>[o(s,{type:"date",label:"Inicio",modelValue:l.value.start_date,"onUpdate:modelValue":e[4]||(e[4]=a=>l.value.start_date=a)},null,8,["modelValue"])]),_:1}),o(d,{cols:"12",md:"3"},{default:t(()=>[o(s,{type:"date",label:"Término",modelValue:l.value.end_date,"onUpdate:modelValue":e[5]||(e[5]=a=>l.value.end_date=a)},null,8,["modelValue"])]),_:1}),o(d,{cols:"12",md:"3"},{default:t(()=>[o(s,{type:"number",label:"Horizonte (meses)",modelValue:l.value.planning_horizon_months,"onUpdate:modelValue":e[6]||(e[6]=a=>l.value.planning_horizon_months=a),modelModifiers:{number:!0}},null,8,["modelValue"])]),_:1}),o(d,{cols:"12",md:"3"},{default:t(()=>[o(s,{label:"Notas de Ámbito",modelValue:l.value.scope_notes,"onUpdate:modelValue":e[7]||(e[7]=a=>l.value.scope_notes=a)},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),o(z,null,{default:t(()=>[o(y),o(x,{color:"primary",loading:i.value,onClick:f},{default:t(()=>[o(w,{start:""},{default:t(()=>[...e[8]||(e[8]=[m("mdi-content-save",-1)])]),_:1}),e[9]||(e[9]=m(" Crear Plan ",-1))]),_:1},8,["loading"])]),_:1})]),_:1})])}}});export{J as default};
