import"./useApi-D-wG6FEk.js";import{d as ae,o as ne,r as n,b as c,c as v,e as t,w as l,j as r,u as _,g as s,F as P,q as z,t as u,s as re,f as A,i as B,k as E,v as g,J as ie,m as de}from"./app-B4Q7DtOZ.js";import{u as ue}from"./scenarioPlanningScenariosStore-Ba7C30D1.js";import"./apiHelper-BLoNXDsG.js";const ce={class:"skill-gaps-matrix"},me={class:"pa-4 overflow-x-auto"},pe={class:"skills-matrix"},ve={class:"skill-name"},_e=["onClick"],ge={class:"gap-cell"},fe={class:"coverage-pct"},xe={class:"text-caption"},ye={class:"d-flex align-center"},be={class:"d-flex align-center"},Ce={class:"d-flex align-center"},ke={class:"text-h6"},we=ae({__name:"SkillGapsMatrix",props:{scenarioId:{}},setup(R){const k=R,{showSuccess:$}=ie(),i=ue(),d=E(null),y=E(!1),H=[{title:"Critical",value:"critical"},{title:"High",value:"high"},{title:"Medium",value:"medium"},{title:"Low",value:"low"}],O=g(()=>i.getLoadingState("gaps")),w=g(()=>i.getError("gaps")),T=g(()=>i.getSkillGaps(k.scenarioId)),S=g(()=>{const o=T.value;if(!Array.isArray(o))return[];const e=new Set(o.map(m=>m.department));return Array.from(e).sort()}),j=g(()=>S.value.map(o=>({title:o,value:o}))),q=g(()=>i.getFilteredSkillGaps(k.scenarioId)),J=async()=>{await i.fetchSkillGaps(k.scenarioId)},h=(o,e)=>{d.value={...o,department:e},y.value=!0},K=()=>{$("Skill gaps matrix exported")},D=(o,e)=>o.coverage_percentage,Q=(o,e)=>o.coverage_percentage>=80?"Covered":o.coverage_percentage>=50?"Partial":"Critical",W=(o,e)=>{const m=D(o);return m>=80?"bg-success-light":m>=50?"bg-warning-light":"bg-error-light"},X=o=>o>=80?"success":o>=50?"warning":"error",F=o=>({critical:"error",high:"warning",medium:"info",low:"success"})[o]||"default";return ne(()=>{J()}),O.value,(o,e)=>{const m=n("v-icon"),M=n("v-card-title"),Y=n("v-card-subtitle"),b=n("v-divider"),I=n("v-select"),p=n("v-col"),L=n("v-btn"),G=n("v-row"),C=n("v-card-text"),f=n("v-chip"),V=n("v-card"),Z=n("v-progress-linear"),N=n("v-list-item-title"),U=n("v-list-item"),ee=n("v-list"),te=n("v-spacer"),le=n("v-card-actions"),se=n("v-dialog"),oe=n("v-alert");return c(),v("div",ce,[t(V,{class:"mb-4"},{default:l(()=>[t(M,{class:"d-flex align-center"},{default:l(()=>[t(m,{left:""},{default:l(()=>[...e[5]||(e[5]=[r("mdi-matrix",-1)])]),_:1}),e[6]||(e[6]=r(" Skill Gaps Analysis ",-1))]),_:1}),t(Y,null,{default:l(()=>[...e[7]||(e[7]=[r(" Skills vs Departments - Coverage analysis and remediation strategies ",-1)])]),_:1}),t(b),t(C,{class:"pb-0"},{default:l(()=>[t(G,{class:"mb-4"},{default:l(()=>[t(p,{cols:"12",md:"4"},{default:l(()=>[t(I,{modelValue:_(i).filters.gapPriority,"onUpdate:modelValue":[e[0]||(e[0]=a=>_(i).filters.gapPriority=a),_(i).setGapPriorityFilter],items:H,label:"Filter by Priority",clearable:""},null,8,["modelValue","onUpdate:modelValue"])]),_:1}),t(p,{cols:"12",md:"4"},{default:l(()=>[t(I,{modelValue:_(i).filters.gapDepartment,"onUpdate:modelValue":[e[1]||(e[1]=a=>_(i).filters.gapDepartment=a),_(i).setGapDepartmentFilter],items:j.value,label:"Filter by Department",clearable:""},null,8,["modelValue","items","onUpdate:modelValue"])]),_:1}),t(p,{cols:"12",md:"4",class:"text-right"},{default:l(()=>[t(L,{onClick:K,variant:"outlined",size:"small","prepend-icon":"mdi-download"},{default:l(()=>[...e[8]||(e[8]=[r(" Export Matrix ",-1)])]),_:1})]),_:1})]),_:1})]),_:1}),s("div",me,[s("table",pe,[s("thead",null,[s("tr",null,[e[9]||(e[9]=s("th",null,"Skill",-1)),(c(!0),v(P,null,z(S.value,a=>(c(),v("th",{key:a},u(a),1))),128))])]),s("tbody",null,[(c(!0),v(P,null,z(q.value,a=>(c(),v("tr",{key:a.id},[s("td",ve,[s("strong",null,u(a.skill_name),1),t(f,{color:F(a.priority),"text-color":"white",size:"x-small",class:"ml-2"},{default:l(()=>[r(u(a.priority),1)]),_:2},1032,["color"])]),(c(!0),v(P,null,z(S.value,x=>(c(),v("td",{key:a.id+"-"+x,class:re(W(a,x)),onClick:Se=>h(a,x)},[s("div",ge,[s("div",fe,u(D(a,x))+"% ",1),s("div",xe,u(Q(a,x)),1)])],10,_e))),128))]))),128))])])]),t(C,null,{default:l(()=>[e[13]||(e[13]=s("h4",{class:"mb-2"},"Legend",-1)),t(G,null,{default:l(()=>[t(p,{cols:"6",md:"3"},{default:l(()=>[s("div",ye,[t(f,{color:"success",size:"small",class:"mr-2"}),e[10]||(e[10]=s("span",{class:"text-caption"},"Covered (>80%)",-1))])]),_:1}),t(p,{cols:"6",md:"3"},{default:l(()=>[s("div",be,[t(f,{color:"warning",size:"small",class:"mr-2"}),e[11]||(e[11]=s("span",{class:"text-caption"},"Partial (50-80%)",-1))])]),_:1}),t(p,{cols:"6",md:"3"},{default:l(()=>[s("div",Ce,[t(f,{color:"error",size:"small",class:"mr-2"}),e[12]||(e[12]=s("span",{class:"text-caption"},"Critical (<50%)",-1))])]),_:1})]),_:1})]),_:1})]),_:1}),t(se,{modelValue:y.value,"onUpdate:modelValue":e[3]||(e[3]=a=>y.value=a),"max-width":"600px"},{default:l(()=>[d.value?(c(),A(V,{key:0},{default:l(()=>[t(M,null,{default:l(()=>[r(u(d.value.skill_name)+" - "+u(d.value.department),1)]),_:1}),t(b),t(C,{class:"pt-4"},{default:l(()=>[t(G,{class:"mb-4"},{default:l(()=>[t(p,{cols:"12",md:"6"},{default:l(()=>[e[14]||(e[14]=s("div",{class:"text-caption text-medium-emphasis"}," Coverage ",-1)),t(Z,{value:d.value.coverage_percentage,color:X(d.value.coverage_percentage),height:"8",class:"mb-2"},null,8,["value","color"]),s("div",ke,u(d.value.coverage_percentage)+"% ",1)]),_:1}),t(p,{cols:"12",md:"6"},{default:l(()=>[e[15]||(e[15]=s("div",{class:"text-caption text-medium-emphasis"}," Priority ",-1)),t(f,{color:F(d.value.priority),"text-color":"white",size:"small"},{default:l(()=>[r(u(d.value.priority),1)]),_:1},8,["color"])]),_:1})]),_:1}),t(b,{class:"my-4"}),e[20]||(e[20]=s("h4",{class:"mb-3"},"Remediation Strategy",-1)),t(V,{variant:"outlined",class:"mb-4"},{default:l(()=>[t(C,null,{default:l(()=>[r(u(d.value.remediation_strategy),1)]),_:1})]),_:1}),e[21]||(e[21]=s("h4",{class:"mb-3"},"Recommendations",-1)),t(ee,{density:"compact"},{default:l(()=>[t(U,null,{prepend:l(()=>[t(m,{size:"small"},{default:l(()=>[...e[16]||(e[16]=[r("mdi-school",-1)])]),_:1})]),default:l(()=>[t(N,null,{default:l(()=>[...e[17]||(e[17]=[r("Training Program (3 months)",-1)])]),_:1})]),_:1}),t(U,null,{prepend:l(()=>[t(m,{size:"small"},{default:l(()=>[...e[18]||(e[18]=[r("mdi-briefcase-search",-1)])]),_:1})]),default:l(()=>[t(N,null,{default:l(()=>[...e[19]||(e[19]=[r("External Hiring (2-3 positions)",-1)])]),_:1})]),_:1})]),_:1})]),_:1}),t(b),t(le,null,{default:l(()=>[t(te),t(L,{onClick:e[2]||(e[2]=a=>y.value=!1),variant:"text"},{default:l(()=>[...e[22]||(e[22]=[r("Close",-1)])]),_:1})]),_:1})]),_:1})):B("",!0)]),_:1},8,["modelValue"]),w.value?(c(),A(oe,{key:0,type:"error",text:w.value,closable:"","onClick:close":e[4]||(e[4]=a=>w.value=null)},null,8,["text"])):B("",!0)])}}}),De=de(we,[["__scopeId","data-v-34171c16"]]);export{De as default};
