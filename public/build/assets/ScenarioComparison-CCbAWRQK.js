import{u as M}from"./useApi-DEBD0yG7.js";import{d as U,r as m,p as j,o as P,b as s,c as T,e as v,f as r,g as S,i as w,w as t,k as n,t as i,j as C,J}from"./app-BQBzBluS.js";import{u as O}from"./scenarioPlanningScenariosStore-DvAo8lLm.js";import"./apiHelper-CL77IM7H.js";const $={class:"scenario-comparison"},q={class:"text-caption"},L=U({__name:"ScenarioComparison",props:{scenarioId:{}},setup(I){const f=I,y=M(),{showError:d}=J(),u=O(),_=m(!1),p=m(!1),c=m(null),l=m(f.scenarioId?[f.scenarioId]:[]),N=j(()=>u.scenarios||[]),V=async()=>{if(!(u.scenarios.length>0)){_.value=!0;try{const e=await y.get("/api/strategic-planning/scenarios"),a=Array.isArray(e?.data)?e.data:Array.isArray(e)?e:[];u.scenarios=a}catch{d("No se pudieron cargar los escenarios para comparar")}finally{_.value=!1}}},A=async()=>{if(!l.value.length){d("Selecciona al menos un escenario para comparar");return}p.value=!0;try{const e=await y.post("/api/scenario-comparisons",{scenario_ids:l.value,comparison_criteria:{cost:!0,time:!0,risk:!0,coverage:!0,roi:!0}});c.value=e?.data||e}catch{d("Error al comparar escenarios")}finally{p.value=!1}},E=e=>e==null?"—":new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",maximumFractionDigits:0}).format(e),B=e=>e==null?"—":`${Math.round(e*100)}%`;return P(()=>{V()}),(e,a)=>{const g=s("v-card-title"),F=s("v-select"),k=s("v-col"),R=s("v-btn"),h=s("v-row"),x=s("v-card-text"),b=s("v-card"),D=s("v-data-table");return v(),T("div",$,[r(b,{class:"mb-4"},{default:t(()=>[r(g,null,{default:t(()=>[...a[1]||(a[1]=[n("Comparar escenarios",-1)])]),_:1}),r(x,null,{default:t(()=>[r(h,null,{default:t(()=>[r(k,{cols:"12",md:"8"},{default:t(()=>[r(F,{modelValue:l.value,"onUpdate:modelValue":a[0]||(a[0]=o=>l.value=o),items:N.value,"item-title":"name","item-value":"id",label:"Selecciona escenarios",multiple:"",chips:"","closable-chips":"",loading:_.value},null,8,["modelValue","items","loading"])]),_:1}),r(k,{cols:"12",md:"4",class:"d-flex align-end justify-end"},{default:t(()=>[r(R,{color:"primary",loading:p.value,onClick:A,"prepend-icon":"mdi-compare"},{default:t(()=>[...a[2]||(a[2]=[n(" Comparar ",-1)])]),_:1},8,["loading"])]),_:1})]),_:1})]),_:1})]),_:1}),c.value?(v(),S(b,{key:0},{default:t(()=>[r(g,null,{default:t(()=>[...a[3]||(a[3]=[n("Resultado de comparación",-1)])]),_:1}),r(D,{items:c.value.scenarios,headers:[{title:"Escenario",key:"name"},{title:"Costo total",key:"total_cost"},{title:"Timeline (semanas)",key:"max_timeline_weeks"},{title:"Riesgo",key:"average_risk_score"},{title:"Cobertura",key:"expected_coverage"},{title:"ROI",key:"estimated_roi"}],"item-key":"scenario_id",class:"elevation-0"},{"item.total_cost":t(({item:o})=>[n(i(E(o.total_cost)),1)]),"item.max_timeline_weeks":t(({item:o})=>[n(i(o.max_timeline_weeks||"—"),1)]),"item.average_risk_score":t(({item:o})=>[n(i(o.average_risk_score?.toFixed(2)??"—"),1)]),"item.expected_coverage":t(({item:o})=>[n(i(B(o.expected_coverage)),1)]),"item.estimated_roi":t(({item:o})=>[n(i(o.estimated_roi?o.estimated_roi.toFixed(2)+"x":"—"),1)]),_:1},8,["items"]),c.value?.comparison_summary?(v(),S(x,{key:0},{default:t(()=>[a[4]||(a[4]=C("div",{class:"text-subtitle-1 mb-2"},"Resumen",-1)),C("pre",q,i(c.value.comparison_summary),1)]),_:1})):w("",!0)]),_:1})):w("",!0)])}}});export{L as default};
