import{u as D}from"./useApi-D-wG6FEk.js";import{d as H,r as a,b as O,f as q,w as o,e as t,j as b,k as n,K as J,J as K}from"./app-B4Q7DtOZ.js";const $=H({__name:"ScenarioCreateModal",emits:["created","close"],setup(R,{emit:w}){const E=D(),{showSuccess:k,showError:x}=K(),i=n(""),c=n(""),m=n("draft"),v=n("planned"),p=n(1),_=n(12),f=n(!1),V=w,y=[{value:"draft",title:"Borrador"},{value:"pending_approval",title:"Pendiente"},{value:"approved",title:"Aprobado"},{value:"rejected",title:"Rechazado"}],U=[{value:"planned",title:"Planificado"},{value:"in_progress",title:"En ejecución"},{value:"paused",title:"Pausado"},{value:"completed",title:"Completado"}],N=async()=>{if(!i.value.trim()){x("El nombre del escenario es obligatorio");return}f.value=!0;try{const d={name:i.value,description:c.value,decision_status:m.value,execution_status:v.value,version_number:p.value,time_horizon_weeks:_.value},e=await E.post("/api/strategic-planning/scenarios",d),u=e?.data??e;k("Escenario creado"),V("created",u),V("close");const s=u?.id||u?.data?.id;s&&J.visit(`/strategic-planning/${s}`)}catch(d){x(d?.response?.data?.message||"Error al crear escenario")}finally{f.value=!1}},S=()=>V("close");return(d,e)=>{const u=a("v-card-title"),s=a("v-text-field"),r=a("v-col"),j=a("v-textarea"),g=a("v-select"),z=a("v-row"),B=a("v-card-text"),M=a("v-spacer"),C=a("v-btn"),P=a("v-card-actions"),A=a("v-card");return O(),q(A,null,{default:o(()=>[t(u,null,{default:o(()=>[...e[6]||(e[6]=[b("Crear nuevo escenario",-1)])]),_:1}),t(B,null,{default:o(()=>[t(z,null,{default:o(()=>[t(r,{cols:"12"},{default:o(()=>[t(s,{modelValue:i.value,"onUpdate:modelValue":e[0]||(e[0]=l=>i.value=l),label:"Nombre",required:""},null,8,["modelValue"])]),_:1}),t(r,{cols:"12"},{default:o(()=>[t(j,{modelValue:c.value,"onUpdate:modelValue":e[1]||(e[1]=l=>c.value=l),label:"Descripción",rows:"3"},null,8,["modelValue"])]),_:1}),t(r,{cols:"12",md:"6"},{default:o(()=>[t(g,{modelValue:m.value,"onUpdate:modelValue":e[2]||(e[2]=l=>m.value=l),items:y,"item-title":"title","item-value":"value",label:"Estado (Decisión)"},null,8,["modelValue"])]),_:1}),t(r,{cols:"12",md:"6"},{default:o(()=>[t(g,{modelValue:v.value,"onUpdate:modelValue":e[3]||(e[3]=l=>v.value=l),items:U,"item-title":"title","item-value":"value",label:"Estado (Ejecución)"},null,8,["modelValue"])]),_:1}),t(r,{cols:"12",md:"6"},{default:o(()=>[t(s,{modelValue:p.value,"onUpdate:modelValue":e[4]||(e[4]=l=>p.value=l),modelModifiers:{number:!0},label:"Versión",type:"number"},null,8,["modelValue"])]),_:1}),t(r,{cols:"12",md:"6"},{default:o(()=>[t(s,{modelValue:_.value,"onUpdate:modelValue":e[5]||(e[5]=l=>_.value=l),modelModifiers:{number:!0},label:"Horizonte (semanas)",type:"number"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),t(P,null,{default:o(()=>[t(M),t(C,{text:"",onClick:S},{default:o(()=>[...e[7]||(e[7]=[b("Cancelar",-1)])]),_:1}),t(C,{color:"primary",loading:f.value,onClick:N},{default:o(()=>[...e[8]||(e[8]=[b("Crear",-1)])]),_:1},8,["loading"])]),_:1})]),_:1})}}});export{$ as _};
