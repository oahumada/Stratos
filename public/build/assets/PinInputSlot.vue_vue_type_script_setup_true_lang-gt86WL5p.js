import{d as I,at as T,a7 as G,au as H,ao as L,B as K,b as w,f as q,w as E,L as C,u as s,e as U,O as k,a8 as A,v,k as Y,an as J,o as Q,A as W,Y as N,as as X,D as Z,av as z,aw as ee,ax as R,aq as ae,a5 as S,ay as O}from"./app-B4Q7DtOZ.js";import{V as te}from"./VisuallyHiddenInput-BDEo2Oog.js";const[le,ne]=J("PinInputRoot");var se=I({inheritAttrs:!1,__name:"PinInputRoot",props:{modelValue:{type:null,required:!1},defaultValue:{type:null,required:!1},placeholder:{type:String,required:!1,default:""},mask:{type:Boolean,required:!1},otp:{type:Boolean,required:!1},type:{type:null,required:!1,default:"text"},dir:{type:String,required:!1},disabled:{type:Boolean,required:!1},id:{type:String,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1},name:{type:String,required:!1},required:{type:Boolean,required:!1}},emits:["update:modelValue","complete"],setup(u,{emit:l}){const a=u,o=l,{mask:i,otp:p,placeholder:g,type:B,disabled:b,dir:_}=T(a),{forwardRef:D}=G(),y=H(_),c=L(a,"modelValue",o,{defaultValue:a.defaultValue??[],passive:!0,deep:!0}),x=v(()=>Array.isArray(c.value)?[...c.value]:[]),h=Y(new Set);function $(r){h.value.add(r)}const M=v(()=>a.type==="number"),V=v(()=>x.value.filter(m=>!!m||M.value&&m===0).length===h.value.size);return K(c,()=>{V.value&&o("complete",c.value)},{deep:!0}),ne({modelValue:c,currentModelValue:x,mask:i,otp:p,placeholder:g,type:B,dir:y,disabled:b,isCompleted:V,inputElements:h,onInputElementChange:$,isNumericMode:M}),(r,m)=>(w(),q(s(A),k(r.$attrs,{ref:s(D),dir:s(y),"data-complete":V.value?"":void 0,"data-disabled":s(b)?"":void 0}),{default:E(()=>[C(r.$slots,"default",{modelValue:s(c)}),U(te,{id:r.id,as:"input",feature:"focusable",tabindex:"-1",value:x.value.join(""),name:r.name??"",disabled:s(b),required:r.required,onFocus:m[0]||(m[0]=P=>Array.from(h.value)?.[0]?.focus())},null,8,["id","value","name","disabled","required"])]),_:3},16,["dir","data-complete","data-disabled"]))}}),oe=se,re=I({__name:"PinInputInput",props:{index:{type:Number,required:!0},disabled:{type:Boolean,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1,default:"input"}},setup(u){const l=u,a=le(),o=v(()=>Array.from(a.inputElements.value)),i=v(()=>a.currentModelValue.value[l.index]),p=v(()=>l.disabled||a.disabled.value),g=v(()=>a.otp.value),B=v(()=>a.mask.value),{primitiveElement:b,currentElement:_}=X();function D(e){const t=e.target;if((e.data?.length??0)>1){r(t.value);return}if(a.isNumericMode.value&&!/^\d*$/.test(t.value)){t.value=t.value.replace(/\D/g,"");return}t.value=e.data||t.value.slice(-1),P(l.index,t.value);const n=o.value[l.index+1];n&&n.focus()}function y(){Z(()=>{const e=_.value;e&&(!e.value&&e===z()?e.placeholder="":e.placeholder=a.placeholder.value)})}function c(e){ee(e,z(),void 0,{itemsArray:o.value,focus:!0,loop:!1,arrowKeyOptions:"horizontal",dir:a.dir.value})}function x(e){if(e.preventDefault(),e.target.value)P(l.index,"");else{const d=o.value[l.index-1];d&&(d.focus(),P(l.index-1,""))}}function h(e){e.key==="Delete"&&(e.preventDefault(),P(l.index,""))}function $(e){if(a.otp.value){const n=o.value.findIndex((d,f)=>a.currentModelValue.value[f]===""||a.currentModelValue.value[f]===void 0);if(n!==-1&&n<l.index){o.value[n].focus();return}}e.target.setSelectionRange(1,1),y()}function M(e){y()}function V(e){e.preventDefault();const t=e.clipboardData;if(!t)return;const n=t.getData("text");r(n)}function r(e){const t=[...a.currentModelValue.value],n=e.length>=o.value.length?0:l.index,d=Math.min(n+e.length,o.value.length);for(let f=n;f<d;f++){const j=o.value[f],F=e[f-n];a.isNumericMode.value&&!/^\d*$/.test(F)||(t[f]=F,j.focus())}a.modelValue.value=t,o.value[d]?.focus()}function m(e){let t=e.length-1;for(;t>=0&&e[t]==="";)e.pop(),t--;return e}function P(e,t){const n=[...a.currentModelValue.value];if(a.isNumericMode.value){const d=+t;t===""||isNaN(d)?delete n[e]:n[e]=d}else n[e]=t;a.modelValue.value=m(n)}return K(i,y),Q(()=>{a.onInputElementChange(_.value)}),W(()=>{a.inputElements?.value.delete(_.value)}),(e,t)=>(w(),q(s(A),{ref_key:"primitiveElement",ref:b,autocapitalize:"none",as:e.as,"as-child":e.asChild,autocomplete:g.value?"one-time-code":"false",type:B.value?"password":"text",inputmode:s(a).isNumericMode.value?"numeric":"text",pattern:s(a).isNumericMode.value?"[0-9]*":void 0,placeholder:s(a).placeholder.value,value:i.value,disabled:p.value,"data-disabled":p.value?"":void 0,"data-complete":s(a).isCompleted.value?"":void 0,"aria-label":`pin input ${e.index+1} of ${o.value.length}`,onInput:t[0]||(t[0]=n=>D(n)),onKeydown:[N(c,["left","right","up","down","home","end"]),N(x,["backspace"]),N(h,["delete"])],onFocus:$,onBlur:M,onPaste:V},{default:E(()=>[C(e.$slots,"default")]),_:3},8,["as","as-child","autocomplete","type","inputmode","pattern","placeholder","value","disabled","data-disabled","data-complete","aria-label"]))}}),ue=re;const pe=I({__name:"PinInput",props:{modelValue:{default:()=>[]},defaultValue:{},placeholder:{},mask:{type:Boolean},otp:{type:Boolean},type:{},dir:{},disabled:{type:Boolean},id:{},asChild:{type:Boolean},as:{},name:{},required:{type:Boolean},class:{}},emits:["update:modelValue","complete"],setup(u,{emit:l}){const a=u,o=l,i=R(a,"class"),p=ae(i,o);return(g,B)=>(w(),q(s(oe),k({"data-slot":"pin-input"},s(p),{class:s(S)("flex items-center gap-2 has-disabled:opacity-50 disabled:cursor-not-allowed",a.class)}),{default:E(()=>[C(g.$slots,"default")]),_:3},16,["class"]))}}),ce=I({__name:"PinInputGroup",props:{asChild:{type:Boolean},as:{},class:{}},setup(u){const l=u,a=R(l,"class"),o=O(a);return(i,p)=>(w(),q(s(A),k({"data-slot":"pin-input-group"},s(o),{class:s(S)("flex items-center",l.class)}),{default:E(()=>[C(i.$slots,"default")]),_:3},16,["class"]))}}),fe=I({__name:"PinInputSlot",props:{index:{},disabled:{type:Boolean},asChild:{type:Boolean},as:{},class:{}},setup(u){const l=u,a=R(l,"class"),o=O(a);return(i,p)=>(w(),q(s(ue),k({"data-slot":"pin-input-slot"},s(o),{class:s(S)("border-input focus:border-ring focus:ring-ring/50 focus:aria-invalid:ring-destructive/20 dark:bg-input/30 dark:focus:aria-invalid:ring-destructive/40 aria-invalid:border-destructive focus:aria-invalid:border-destructive relative flex h-9 w-9 items-center justify-center border-y border-r text-sm shadow-xs transition-all outline-none text-center first:rounded-l-md first:border-l last:rounded-r-md focus:z-10 focus:ring-[3px]",l.class)}),null,16,["class"]))}});export{pe as _,ce as a,fe as b};
