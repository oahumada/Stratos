import{d as w,as as j,a8 as T,at as G,a5 as H,p as f,r as U,B as z,an as Z,g as q,e as I,w as C,M as E,f as J,u as l,O as k,a9 as A,aq as L,o as Q,A as W,Z as N,D as X,au as Y,av as ee,aw as R,ap as ae,a6 as S,ax as K}from"./app-BQBzBluS.js";import{V as te}from"./VisuallyHiddenInput-DmQxOusP.js";const[le,se]=Z("PinInputRoot");var ne=w({inheritAttrs:!1,__name:"PinInputRoot",props:{modelValue:{type:null,required:!1},defaultValue:{type:null,required:!1},placeholder:{type:String,required:!1,default:""},mask:{type:Boolean,required:!1},otp:{type:Boolean,required:!1},type:{type:null,required:!1,default:"text"},dir:{type:String,required:!1},disabled:{type:Boolean,required:!1},id:{type:String,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1},name:{type:String,required:!1},required:{type:Boolean,required:!1}},emits:["update:modelValue","complete"],setup(i,{emit:s}){const a=i,n=s,{mask:u,otp:d,placeholder:h,type:B,disabled:y,dir:g}=j(a),{forwardRef:D}=T(),b=G(g),p=H(a,"modelValue",n,{defaultValue:a.defaultValue??[],passive:!0,deep:!0}),_=f(()=>Array.isArray(p.value)?[...p.value]:[]),v=U(new Set);function $(r){v.value.add(r)}const M=f(()=>a.type==="number"),x=f(()=>_.value.filter(m=>!!m||M.value&&m===0).length===v.value.size);return z(p,()=>{x.value&&n("complete",p.value)},{deep:!0}),se({modelValue:p,currentModelValue:_,mask:u,otp:d,placeholder:h,type:B,dir:b,disabled:y,isCompleted:x,inputElements:v,onInputElementChange:$,isNumericMode:M}),(r,m)=>(I(),q(l(A),k(r.$attrs,{ref:l(D),dir:l(b),"data-complete":x.value?"":void 0,"data-disabled":l(y)?"":void 0}),{default:C(()=>[E(r.$slots,"default",{modelValue:l(p)}),J(te,{id:r.id,as:"input",feature:"focusable",tabindex:"-1",value:_.value.join(""),name:r.name??"",disabled:l(y),required:r.required,onFocus:m[0]||(m[0]=V=>Array.from(v.value)?.[0]?.focus())},null,8,["id","value","name","disabled","required"])]),_:3},16,["dir","data-complete","data-disabled"]))}}),oe=ne,re=w({__name:"PinInputInput",props:{index:{type:Number,required:!0},disabled:{type:Boolean,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1,default:"input"}},setup(i){const s=i,a=le(),n=f(()=>Array.from(a.inputElements.value)),u=f(()=>a.currentModelValue.value[s.index]),d=f(()=>s.disabled||a.disabled.value),h=f(()=>a.otp.value),B=f(()=>a.mask.value),{primitiveElement:y,currentElement:g}=L();function D(e){const t=e.target;if((e.data?.length??0)>1){r(t.value);return}if(a.isNumericMode.value&&!/^\d*$/.test(t.value)){t.value=t.value.replace(/\D/g,"");return}t.value=e.data||t.value.slice(-1),V(s.index,t.value);const o=n.value[s.index+1];o&&o.focus()}function b(){const e=g.value;X(()=>{e&&!e.value&&(e.placeholder=a.placeholder.value)})}function p(e){Y(e,ee(),void 0,{itemsArray:n.value,focus:!0,loop:!1,arrowKeyOptions:"horizontal",dir:a.dir.value})}function _(e){if(e.preventDefault(),e.target.value)V(s.index,"");else{const c=n.value[s.index-1];c&&(c.focus(),V(s.index-1,""))}}function v(e){e.key==="Delete"&&(e.preventDefault(),V(s.index,""))}function $(e){const t=e.target;t.setSelectionRange(1,1),t.value||(t.placeholder=""),setTimeout(()=>{t.value||(t.placeholder="")})}function M(e){b()}function x(e){e.preventDefault();const t=e.clipboardData;if(!t)return;const o=t.getData("text");r(o)}function r(e){const t=[...a.currentModelValue.value],o=e.length>=n.value.length?0:s.index,c=Math.min(o+e.length,n.value.length);for(let P=o;P<c;P++){const O=n.value[P],F=e[P-o];a.isNumericMode.value&&!/^\d*$/.test(F)||(t[P]=F,O.focus())}a.modelValue.value=t,n.value[c]?.focus()}function m(e){let t=e.length-1;for(;t>=0&&e[t]==="";)e.pop(),t--;return e}function V(e,t){const o=[...a.currentModelValue.value];if(a.isNumericMode.value){const c=+t;t===""||isNaN(c)?delete o[e]:o[e]=c}else o[e]=t;a.modelValue.value=m(o)}return z(u,()=>{u.value||b()}),Q(()=>{a.onInputElementChange(g.value)}),W(()=>{a.inputElements?.value.delete(g.value)}),(e,t)=>(I(),q(l(A),{ref_key:"primitiveElement",ref:y,autocapitalize:"none",as:e.as,"as-child":e.asChild,autocomplete:h.value?"one-time-code":"false",type:B.value?"password":"text",inputmode:l(a).isNumericMode.value?"numeric":"text",pattern:l(a).isNumericMode.value?"[0-9]*":void 0,placeholder:l(a).placeholder.value,value:u.value,disabled:d.value,"data-disabled":d.value?"":void 0,"data-complete":l(a).isCompleted.value?"":void 0,"aria-label":`pin input ${e.index+1} of ${n.value.length}`,onInput:t[0]||(t[0]=o=>D(o)),onKeydown:[N(p,["left","right","up","down","home","end"]),N(_,["backspace"]),N(v,["delete"])],onFocus:$,onBlur:M,onPaste:x},{default:C(()=>[E(e.$slots,"default")]),_:3},8,["as","as-child","autocomplete","type","inputmode","pattern","placeholder","value","disabled","data-disabled","data-complete","aria-label"]))}}),ue=re;const pe=w({__name:"PinInput",props:{modelValue:{default:()=>[]},defaultValue:{},placeholder:{},mask:{type:Boolean},otp:{type:Boolean},type:{},dir:{},disabled:{type:Boolean},id:{},asChild:{type:Boolean},as:{},name:{},required:{type:Boolean},class:{}},emits:["update:modelValue","complete"],setup(i,{emit:s}){const a=i,n=s,u=R(a,"class"),d=ae(u,n);return(h,B)=>(I(),q(l(oe),k({"data-slot":"pin-input"},l(d),{class:l(S)("flex items-center gap-2 has-disabled:opacity-50 disabled:cursor-not-allowed",a.class)}),{default:C(()=>[E(h.$slots,"default")]),_:3},16,["class"]))}}),ce=w({__name:"PinInputGroup",props:{asChild:{type:Boolean},as:{},class:{}},setup(i){const s=i,a=R(s,"class"),n=K(a);return(u,d)=>(I(),q(l(A),k({"data-slot":"pin-input-group"},l(n),{class:l(S)("flex items-center",s.class)}),{default:C(()=>[E(u.$slots,"default")]),_:3},16,["class"]))}}),fe=w({__name:"PinInputSlot",props:{index:{},disabled:{type:Boolean},asChild:{type:Boolean},as:{},class:{}},setup(i){const s=i,a=R(s,"class"),n=K(a);return(u,d)=>(I(),q(l(ue),k({"data-slot":"pin-input-slot"},l(n),{class:l(S)("border-input focus:border-ring focus:ring-ring/50 focus:aria-invalid:ring-destructive/20 dark:bg-input/30 dark:focus:aria-invalid:ring-destructive/40 aria-invalid:border-destructive focus:aria-invalid:border-destructive relative flex h-9 w-9 items-center justify-center border-y border-r text-sm shadow-xs transition-all outline-none text-center first:rounded-l-md first:border-l last:rounded-r-md focus:z-10 focus:ring-[3px]",s.class)}),null,16,["class"]))}});export{pe as _,ce as a,fe as b};
