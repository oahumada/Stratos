import{R as n,l as c}from"./app-BQBzBluS.js";const l=n("workforcePlanning",{state:()=>({scenarios:[],activeScenario:null,activeScenarioId:null,analyticsByScenario:new Map,forecastsByScenario:new Map,matchesByScenario:new Map,gapsByScenario:new Map,successionPlansByScenario:new Map,filters:{forecastArea:null,forecastCriticality:null,matchReadiness:null,matchScoreRange:null,gapPriority:null,gapDepartment:null,searchTerm:null},loading:{scenarios:!1,analytics:!1,forecasts:!1,matches:!1,gaps:!1,succession:!1},errors:{scenarios:null,analytics:null,forecasts:null,matches:null,gaps:null,succession:null}}),getters:{getAllScenarios:e=>e.scenarios,getActiveScenario:e=>e.activeScenario,getAnalytics:e=>r=>e.analyticsByScenario.get(r)||null,getForecasts:e=>r=>e.forecastsByScenario.get(r)||[],getFilteredForecasts:e=>r=>{const a=e.forecastsByScenario.get(r)||[];if(!Array.isArray(a))return[];let s=a;return e.filters.forecastArea&&(s=s.filter(t=>t.area===e.filters.forecastArea)),e.filters.forecastCriticality&&(s=s.filter(t=>t.criticality_level===e.filters.forecastCriticality)),s},getMatches:e=>r=>e.matchesByScenario.get(r)||[],getFilteredMatches:e=>r=>{const a=e.matchesByScenario.get(r)||[];if(!Array.isArray(a))return[];let s=a;if(e.filters.matchReadiness&&(s=s.filter(t=>t.readiness_level===e.filters.matchReadiness)),e.filters.matchScoreRange&&(s=s.filter(t=>e.filters.matchScoreRange==="high"?t.match_score>=80:e.filters.matchScoreRange==="medium"?t.match_score>=60&&t.match_score<80:e.filters.matchScoreRange==="low"?t.match_score<60:!0)),e.filters.searchTerm){const t=e.filters.searchTerm.toLowerCase();s=s.filter(i=>i.candidate_name.toLowerCase().includes(t)||i.current_role.toLowerCase().includes(t)||i.target_role.toLowerCase().includes(t))}return s},getSkillGaps:e=>r=>e.gapsByScenario.get(r)||[],getFilteredSkillGaps:e=>r=>{const a=e.gapsByScenario.get(r)||[];if(!Array.isArray(a))return[];let s=a;return e.filters.gapPriority&&(s=s.filter(t=>t.priority===e.filters.gapPriority)),e.filters.gapDepartment&&(s=s.filter(t=>t.department===e.filters.gapDepartment)),s},getSuccessionPlans:e=>r=>e.successionPlansByScenario.get(r)||[],isLoading:e=>Object.values(e.loading).some(r=>r===!0),getLoadingState:e=>r=>e.loading[r],getError:e=>r=>e.errors[r]||null},actions:{async fetchScenarios(){this.loading.scenarios=!0,this.errors.scenarios=null;try{const e=await c.get("/api/strategic-planning/scenarios");this.scenarios=e.data&&Array.isArray(e.data.data)?e.data.data:Array.isArray(e.data)?e.data:[]}catch(e){this.errors.scenarios=e.message||"Failed to fetch scenarios",console.error("Error fetching scenarios:",e)}finally{this.loading.scenarios=!1}},async fetchScenario(e){try{const r=await c.get(`/api/strategic-planning/scenarios/${e}`);return this.activeScenario=r.data&&r.data.data?r.data.data:r.data,this.activeScenarioId=e,r.data&&r.data.data?r.data.data:r.data}catch(r){this.errors.scenarios=r.message||"Failed to fetch scenario",console.error("Error fetching scenario:",r)}},setActiveScenario(e){this.activeScenarioId=e;const r=this.scenarios.find(a=>a.id===e);r&&(this.activeScenario=r)},async fetchAnalytics(e){if(this.analyticsByScenario.has(e))return this.analyticsByScenario.get(e);this.loading.analytics=!0,this.errors.analytics=null;try{return null}catch(r){this.errors.analytics=r.message||"Failed to fetch analytics",console.error("Error fetching analytics:",r)}finally{this.loading.analytics=!1}},invalidateAnalyticsCache(e){this.analyticsByScenario.delete(e)},async fetchForecasts(e){if(!e)return console.warn("fetchForecasts called with invalid scenarioId:",e),[];if(this.forecastsByScenario.has(e))return this.forecastsByScenario.get(e);this.loading.forecasts=!0,this.errors.forecasts=null;try{return this.forecastsByScenario.set(e,[]),[]}catch(r){return this.errors.forecasts=r.message||"Failed to fetch forecasts",console.error("Error fetching forecasts:",r),this.forecastsByScenario.set(e,[]),[]}finally{this.loading.forecasts=!1}},setForecastAreaFilter(e){this.filters.forecastArea=e},setForecastCriticalityFilter(e){this.filters.forecastCriticality=e},async fetchMatches(e){if(!e)return console.warn("fetchMatches called with invalid scenarioId:",e),[];if(this.matchesByScenario.has(e))return this.matchesByScenario.get(e);this.loading.matches=!0,this.errors.matches=null;try{return this.matchesByScenario.set(e,[]),[]}catch(r){return this.errors.matches=r.message||"Failed to fetch matches",console.error("Error fetching matches:",r),this.matchesByScenario.set(e,[]),[]}finally{this.loading.matches=!1}},setMatchReadinessFilter(e){this.filters.matchReadiness=e},setMatchScoreRangeFilter(e){this.filters.matchScoreRange=e},setSearchTermFilter(e){this.filters.searchTerm=e},async fetchSkillGaps(e){if(!e)return console.warn("fetchSkillGaps called with invalid scenarioId:",e),[];if(this.gapsByScenario.has(e))return this.gapsByScenario.get(e);this.loading.gaps=!0,this.errors.gaps=null;try{return this.gapsByScenario.set(e,[]),[]}catch(r){return this.errors.gaps=r.message||"Failed to fetch skill gaps",console.error("Error fetching skill gaps:",r),this.gapsByScenario.set(e,[]),[]}finally{this.loading.gaps=!1}},setGapPriorityFilter(e){this.filters.gapPriority=e},setGapDepartmentFilter(e){this.filters.gapDepartment=e},async fetchSuccessionPlans(e){if(!e)return console.warn("fetchSuccessionPlans called with invalid scenarioId:",e),[];if(this.successionPlansByScenario.has(e))return this.successionPlansByScenario.get(e);this.loading.succession=!0,this.errors.succession=null;try{return this.successionPlansByScenario.set(e,[]),[]}catch(r){return this.errors.succession=r.message||"Failed to fetch succession plans",console.error("Error fetching succession plans:",r),this.successionPlansByScenario.set(e,[]),[]}finally{this.loading.succession=!1}},clearAllCaches(){this.analyticsByScenario.clear(),this.forecastsByScenario.clear(),this.matchesByScenario.clear(),this.gapsByScenario.clear(),this.successionPlansByScenario.clear()},clearScenarioCaches(e){this.analyticsByScenario.delete(e),this.forecastsByScenario.delete(e),this.matchesByScenario.delete(e),this.gapsByScenario.delete(e),this.successionPlansByScenario.delete(e)},resetFilters(){this.filters={forecastArea:null,forecastCriticality:null,matchReadiness:null,matchScoreRange:null,gapPriority:null,gapDepartment:null,searchTerm:null}}}}),h=l;export{h as u};
