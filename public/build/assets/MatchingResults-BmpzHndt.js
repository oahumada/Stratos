import{u as xe}from"./useApi-D-wG6FEk.js";import{d as ke,o as ye,r as i,b as m,c as x,e as l,w as t,j as o,u as _,g as n,t as r,O as be,F as G,q,f as C,i as I,k as H,v as b,J as Me,m as we}from"./app-B4Q7DtOZ.js";import{u as Re}from"./scenarioPlanningScenariosStore-Ba7C30D1.js";import"./apiHelper-BLoNXDsG.js";const Ce={class:"matching-results"},Se={class:"text-h5 font-weight-bold"},Ve={class:"text-h5 font-weight-bold text-success"},Te={class:"text-h5 font-weight-bold text-primary"},ze={class:"text-h5 font-weight-bold text-info"},Ae={class:"d-flex align-center"},Ie={class:"font-weight-bold"},Ne={class:"text-caption text-medium-emphasis"},$e={class:"d-flex align-center"},De={class:"d-flex align-center"},Fe={class:"text-body2 font-weight-bold",style:{"min-width":"45px"}},Ue={key:0},Pe={key:1,class:"text-success"},Le={class:"text-h6"},Be={key:0,class:"mb-4"},Ee={key:1,class:"text-success mb-4"},Oe=ke({__name:"MatchingResults",props:{scenarioId:{}},setup(J){const T=J,K=xe(),{showSuccess:M,showError:Q}=Me(),c=Re(),d=H(null),w=H(!1),W=[{title:"Immediate",value:"immediate"},{title:"Short Term (1-3 months)",value:"short_term"},{title:"Long Term (3-12 months)",value:"long_term"},{title:"Not Ready",value:"not_ready"}],X=[{title:"80-100%",value:"high"},{title:"60-80%",value:"medium"},{title:"40-60%",value:"low"}],Y=[{title:"Candidate",value:"candidate_name",width:"200px"},{title:"Target Role",value:"target_role",width:"180px"},{title:"Match Score",value:"match_score",align:"center"},{title:"Readiness",value:"readiness_level",align:"center"},{title:"Type",value:"transition_type",align:"center"},{title:"Gaps",value:"skill_gaps"},{title:"Risk",value:"risk_level",align:"center"},{title:"Actions",value:"actions",align:"center",sortable:!1}],Z=b(()=>c.getLoadingState("matches")),z=b(()=>c.getError("matches")),R=b(()=>{const a=c.getFilteredMatches(T.scenarioId);return Array.isArray(a)?a:[]}),ee=b(()=>{const a=R.value;return Array.isArray(a)?a.filter(e=>e.readiness_level==="immediate").length:0}),te=b(()=>{const a=R.value;if(!Array.isArray(a)||a.length===0)return 0;const e=a.reduce((u,S)=>u+S.match_score,0);return Math.round(e/a.length)}),le=b(()=>{const a=R.value;if(!Array.isArray(a)||a.length===0)return 0;const e=a.filter(u=>u.match_score>=70).length;return Math.round(e/a.length*100)}),N=async()=>{await c.fetchMatches(T.scenarioId)},ae=a=>{d.value=a,w.value=!0},se=a=>{M(`View recommendations for ${a.candidate_name}`)},oe=a=>{M(`Development plan created for ${a.candidate_name}`)},ne=async()=>{if(d.value)try{await K.post(`/api/strategic-planning/matches/${d.value.id}/approve`,{}),M("Match approved successfully"),w.value=!1,c.clearScenarioCaches(T.scenarioId),await N()}catch(a){Q("Failed to approve match"),console.error(a)}},ie=a=>{M(`Match details exported for ${a.candidate_name}`)},re=()=>{M("Matching report generated and downloaded")},de=a=>a.split(" ").map(e=>e[0]).join("").toUpperCase(),$=a=>a>=80?"success":a>=60?"warning":"error",D=a=>({immediate:"success",short_term:"info",long_term:"warning",not_ready:"error"})[a]||"default",ce=a=>({promotion:"success",lateral:"info",reskilling:"warning",no_match:"error"})[a]||"default",F=a=>({low:"success",medium:"warning",high:"error"})[a]||"default",U=a=>({immediate:"Immediate",short_term:"Short Term",long_term:"Long Term",not_ready:"Not Ready"})[a]||a,P=a=>({promotion:"Promotion",lateral:"Lateral Move",reskilling:"Reskilling",no_match:"No Match"})[a]||a;return ye(()=>{N()}),(a,e)=>{const u=i("v-icon"),S=i("v-card-title"),ue=i("v-card-subtitle"),k=i("v-divider"),L=i("v-select"),v=i("v-col"),me=i("v-text-field"),V=i("v-btn"),A=i("v-row"),y=i("v-card"),B=i("v-card-text"),ve=i("v-avatar"),E=i("v-progress-linear"),p=i("v-chip"),g=i("v-list-item-title"),h=i("v-list-item"),O=i("v-list"),_e=i("v-menu"),pe=i("v-data-table"),j=i("v-alert"),fe=i("v-spacer"),ge=i("v-card-actions"),he=i("v-dialog");return m(),x("div",Ce,[l(y,{class:"mb-4"},{default:t(()=>[l(S,{class:"d-flex align-center"},{default:t(()=>[l(u,{left:""},{default:t(()=>[...e[6]||(e[6]=[o("mdi-account-match",-1)])]),_:1}),e[7]||(e[7]=o(" Internal Talent Matching ",-1))]),_:1}),l(ue,null,{default:t(()=>[...e[8]||(e[8]=[o(" Available internal candidates matched to open positions ",-1)])]),_:1}),l(k),l(B,{class:"pb-0"},{default:t(()=>[l(A,{class:"mb-4"},{default:t(()=>[l(v,{cols:"12",md:"3"},{default:t(()=>[l(L,{modelValue:_(c).filters.matchReadiness,"onUpdate:modelValue":[e[0]||(e[0]=s=>_(c).filters.matchReadiness=s),_(c).setMatchReadinessFilter],items:W,label:"Filter by Readiness",clearable:""},null,8,["modelValue","onUpdate:modelValue"])]),_:1}),l(v,{cols:"12",md:"3"},{default:t(()=>[l(L,{modelValue:_(c).filters.matchScoreRange,"onUpdate:modelValue":[e[1]||(e[1]=s=>_(c).filters.matchScoreRange=s),_(c).setMatchScoreRangeFilter],items:X,label:"Match Score Range",clearable:""},null,8,["modelValue","onUpdate:modelValue"])]),_:1}),l(v,{cols:"12",md:"3"},{default:t(()=>[l(me,{modelValue:_(c).filters.searchTerm,"onUpdate:modelValue":[e[2]||(e[2]=s=>_(c).filters.searchTerm=s),_(c).setSearchTermFilter],label:"Search by name/role","prepend-icon":"mdi-magnify",clearable:""},null,8,["modelValue","onUpdate:modelValue"])]),_:1}),l(v,{cols:"12",md:"3",class:"text-right"},{default:t(()=>[l(V,{onClick:re,variant:"outlined",size:"small","prepend-icon":"mdi-file-chart"},{default:t(()=>[...e[9]||(e[9]=[o(" Report ",-1)])]),_:1})]),_:1})]),_:1}),l(A,{class:"mb-4"},{default:t(()=>[l(v,{cols:"6",md:"3"},{default:t(()=>[l(y,{variant:"outlined",class:"pa-3 text-center"},{default:t(()=>[e[10]||(e[10]=n("div",{class:"text-caption text-medium-emphasis"}," Total Matches ",-1)),n("div",Se,r(R.value.length),1)]),_:1})]),_:1}),l(v,{cols:"6",md:"3"},{default:t(()=>[l(y,{variant:"outlined",class:"pa-3 text-center"},{default:t(()=>[e[11]||(e[11]=n("div",{class:"text-caption text-medium-emphasis"}," Immediate Ready ",-1)),n("div",Ve,r(ee.value),1)]),_:1})]),_:1}),l(v,{cols:"6",md:"3"},{default:t(()=>[l(y,{variant:"outlined",class:"pa-3 text-center"},{default:t(()=>[e[12]||(e[12]=n("div",{class:"text-caption text-medium-emphasis"}," Avg Match Score ",-1)),n("div",Te,r(te.value)+"% ",1)]),_:1})]),_:1}),l(v,{cols:"6",md:"3"},{default:t(()=>[l(y,{variant:"outlined",class:"pa-3 text-center"},{default:t(()=>[e[13]||(e[13]=n("div",{class:"text-caption text-medium-emphasis"}," Internal Coverage ",-1)),n("div",ze,r(le.value)+"% ",1)]),_:1})]),_:1})]),_:1})]),_:1}),l(k),l(pe,{headers:Y,items:R.value,loading:Z.value,"items-per-page":15,class:"elevation-0",density:"comfortable"},{"item.candidate_name":t(({item:s})=>[n("div",Ae,[l(ve,{size:"32",class:"mr-2",color:"primary"},{default:t(()=>[o(r(de(s.candidate_name)),1)]),_:2},1024),n("div",null,[n("div",Ie,r(s.candidate_name),1),n("div",Ne,r(s.current_role),1)])])]),"item.target_role":t(({item:s})=>[n("div",$e,[l(u,{size:"small",class:"mr-2"},{default:t(()=>[...e[14]||(e[14]=[o("mdi-briefcase-check",-1)])]),_:1}),n("strong",null,r(s.target_role),1)])]),"item.match_score":t(({item:s})=>[n("div",De,[l(E,{value:s.match_score,color:$(s.match_score),class:"mr-2 flex-grow-1"},null,8,["value","color"]),n("span",Fe,r(s.match_score)+"% ",1)])]),"item.readiness_level":t(({item:s})=>[l(p,{color:D(s.readiness_level),"text-color":"white",size:"small"},{default:t(()=>[o(r(U(s.readiness_level)),1)]),_:2},1032,["color"])]),"item.transition_type":t(({item:s})=>[l(p,{color:ce(s.transition_type),variant:"outlined",size:"small"},{default:t(()=>[o(r(P(s.transition_type)),1)]),_:2},1032,["color"])]),"item.skill_gaps":t(({item:s})=>[s.skill_gaps&&s.skill_gaps.length>0?(m(),x("div",Ue,[(m(!0),x(G,null,q((s.skill_gaps||[]).slice(0,2),f=>(m(),C(p,{key:f,size:"small",variant:"outlined",color:"error",class:"mr-1"},{default:t(()=>[o(r(f),1)]),_:2},1024))),128)),(s.skill_gaps||[]).length>2?(m(),C(p,{key:0,size:"small",variant:"text"},{default:t(()=>[o(" +"+r((s.skill_gaps||[]).length-2),1)]),_:2},1024)):I("",!0)])):(m(),x("div",Pe,[l(u,{size:"small",class:"mr-1"},{default:t(()=>[...e[15]||(e[15]=[o("mdi-check-circle",-1)])]),_:1}),e[16]||(e[16]=o(" No gaps ",-1))]))]),"item.risk_level":t(({item:s})=>[l(p,{color:F(s.risk_level),"text-color":"white",size:"small"},{default:t(()=>[o(r(s.risk_level),1)]),_:2},1032,["color"])]),"item.actions":t(({item:s})=>[l(_e,null,{activator:t(({props:f})=>[l(V,be({icon:"",size:"small"},f),{default:t(()=>[l(u,null,{default:t(()=>[...e[17]||(e[17]=[o("mdi-dots-vertical",-1)])]),_:1})]),_:1},16)]),default:t(()=>[l(O,null,{default:t(()=>[l(h,{onClick:f=>ae(s)},{default:t(()=>[l(g,null,{default:t(()=>[...e[18]||(e[18]=[o("View Details",-1)])]),_:1})]),_:1},8,["onClick"]),l(h,{onClick:f=>se(s)},{default:t(()=>[l(g,null,{default:t(()=>[...e[19]||(e[19]=[o("View Recommendations",-1)])]),_:1})]),_:1},8,["onClick"]),l(h,{onClick:f=>oe(s)},{default:t(()=>[l(g,null,{default:t(()=>[...e[20]||(e[20]=[o("Create Dev Plan",-1)])]),_:1})]),_:1},8,["onClick"]),l(k),l(h,{onClick:f=>ie(s)},{default:t(()=>[l(g,null,{default:t(()=>[...e[21]||(e[21]=[o("Export",-1)])]),_:1})]),_:1},8,["onClick"])]),_:2},1024)]),_:2},1024)]),_:1},8,["items","loading"])]),_:1}),l(he,{modelValue:w.value,"onUpdate:modelValue":e[4]||(e[4]=s=>w.value=s),"max-width":"800px"},{default:t(()=>[d.value?(m(),C(y,{key:0},{default:t(()=>[l(S,null,{default:t(()=>[o(r(d.value.candidate_name)+" â†’ "+r(d.value.target_role),1)]),_:1}),l(k),l(B,{class:"pt-4"},{default:t(()=>[l(A,{class:"mb-4"},{default:t(()=>[l(v,{cols:"12",md:"4"},{default:t(()=>[e[22]||(e[22]=n("div",{class:"text-caption text-medium-emphasis"}," Match Score ",-1)),l(E,{value:d.value.match_score,color:$(d.value.match_score),height:"8",class:"mb-2"},null,8,["value","color"]),n("div",Le,r(d.value.match_score)+"% ",1)]),_:1}),l(v,{cols:"12",md:"4"},{default:t(()=>[e[23]||(e[23]=n("div",{class:"text-caption text-medium-emphasis"}," Readiness ",-1)),l(p,{color:D(d.value.readiness_level),"text-color":"white",size:"small"},{default:t(()=>[o(r(U(d.value.readiness_level)),1)]),_:1},8,["color"])]),_:1}),l(v,{cols:"12",md:"4"},{default:t(()=>[e[24]||(e[24]=n("div",{class:"text-caption text-medium-emphasis"}," Risk Level ",-1)),l(p,{color:F(d.value.risk_level),"text-color":"white",size:"small"},{default:t(()=>[o(r(d.value.risk_level),1)]),_:1},8,["color"])]),_:1})]),_:1}),l(k,{class:"my-4"}),e[34]||(e[34]=n("h4",{class:"mb-3"},"Match Score Breakdown",-1)),l(O,{density:"compact",class:"mb-4"},{default:t(()=>[l(h,null,{prepend:t(()=>[l(u,null,{default:t(()=>[...e[25]||(e[25]=[o("mdi-checkbox-marked-circle",-1)])]),_:1})]),default:t(()=>[l(g,null,{default:t(()=>[...e[26]||(e[26]=[o("Skill Match: 60%",-1)])]),_:1})]),_:1}),l(h,null,{prepend:t(()=>[l(u,null,{default:t(()=>[...e[27]||(e[27]=[o("mdi-clock-check",-1)])]),_:1})]),default:t(()=>[l(g,null,{default:t(()=>[...e[28]||(e[28]=[o("Readiness: 20%",-1)])]),_:1})]),_:1}),l(h,null,{prepend:t(()=>[l(u,null,{default:t(()=>[...e[29]||(e[29]=[o("mdi-shield-check",-1)])]),_:1})]),default:t(()=>[l(g,null,{default:t(()=>[...e[30]||(e[30]=[o("Risk Factor: 20%",-1)])]),_:1})]),_:1})]),_:1}),e[35]||(e[35]=n("h4",{class:"mb-3"},"Skill Gaps",-1)),d.value.skill_gaps&&d.value.skill_gaps.length>0?(m(),x("div",Be,[(m(!0),x(G,null,q(d.value.skill_gaps,s=>(m(),C(p,{key:s,color:"error","text-color":"white",class:"mr-2 mb-2",size:"small"},{default:t(()=>[o(r(s),1)]),_:2},1024))),128))])):(m(),x("div",Ee,[l(u,{size:"small"},{default:t(()=>[...e[31]||(e[31]=[o("mdi-check-circle",-1)])]),_:1}),e[32]||(e[32]=o(" No skill gaps identified ",-1))])),e[36]||(e[36]=n("h4",{class:"mb-3"},"Recommendations",-1)),l(j,{type:"info",variant:"tonal",class:"mb-4"},{default:t(()=>[e[33]||(e[33]=n("strong",null,"Transition Path:",-1)),o(" "+r(P(d.value.transition_type)),1)]),_:1})]),_:1}),l(k),l(ge,null,{default:t(()=>[l(fe),l(V,{onClick:e[3]||(e[3]=s=>w.value=!1),variant:"text"},{default:t(()=>[...e[37]||(e[37]=[o("Close",-1)])]),_:1}),l(V,{onClick:ne,color:"success",variant:"elevated"},{default:t(()=>[...e[38]||(e[38]=[o("Approve Match",-1)])]),_:1})]),_:1})]),_:1})):I("",!0)]),_:1},8,["modelValue"]),z.value?(m(),C(j,{key:0,type:"error",text:z.value,closable:"","onClick:close":e[5]||(e[5]=s=>z.value=null)},null,8,["text"])):I("",!0)])}}}),Je=we(Oe,[["__scopeId","data-v-3cfda81d"]]);export{Je as default};
