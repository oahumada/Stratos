import{d as E,_ as z,r as n,b as c,f as _,w as t,e as o,g as l,t as s,j as i,c as H,F as V,q as B,u,m as J}from"./app-B4Q7DtOZ.js";import R from"./FormSchema-ZpBTxmhH.js";import"./apiHelper-BLoNXDsG.js";import"./index.es-CBox0HgD.js";import"./FormData-AxFC3RFI.js";const $={index:"/api/people",apiUrl:"/api/people"},I=!0,L="GestiÃ³n de Personas",P="Gestionar personas y sus habilidades",U={crear:!0,editar:!0,eliminar:!0},j={endpoints:$,detail:I,titulo:L,descripcion:P,permisos:U},A=[{field:"department_id",type:"select",label:"Departmento",placeholder:"Seleccione el departamento",catalogKey:"departments"},{field:"role_id",type:"select",label:"Rol",placeholder:"Seleccione el rol",catalogKey:"roles"}],G=[{key:"first_name",label:"First Name",type:"text",placeholder:"Enter first name",rules:["required","min:2"]},{key:"last_name",label:"Last Name",type:"text",placeholder:"Enter last name",rules:["required","min:2"]},{key:"email",label:"Email",type:"email",placeholder:"Enter email address",rules:["required","email"]},{key:"department_id",label:"Department",type:"select",placeholder:"Select a department",rules:["required"]},{key:"role_id",label:"Role",type:"select",placeholder:"Select a role",rules:[]},{key:"hire_date",label:"Hire Date",type:"date",rules:[]}],K=["roles","departments"],T={fields:G,catalogs:K},M=[{text:"Lastname",value:"last_name",sortable:!0},{text:"Firstname",value:"first_name",sortable:!0},{text:"Email",value:"email",sortable:!0},{text:"Department",value:"department.name",sortable:!0,key:"department_id"},{text:"Role",value:"role.name",sortable:!1,key:"role_id"},{text:"Skills",value:"skills_count",sortable:!0},{text:"Hired",value:"hire_date",type:"date",sortable:!0},{text:"Actions",value:"actions",sortable:!1}],Y={dense:!1,itemsPerPage:10,showSelect:!1},O={headers:M,options:Y},Q={class:"text-h6 font-weight-bold"},W={class:"text-body-2 text-secondary"},X={class:"text-body-2"},Z={class:"text-body-2"},ee={class:"text-body-2"},te={class:"d-flex align-center justify-space-between mt-4"},ae={class:"d-flex align-center gap-2"},oe={class:"d-flex flex-wrap gap-2"},le=E({layout:z,__name:"Index",setup(se){const g=j,h=O,k=T,w=A,S=d=>{if(!d)return"";try{const e=new Date(d);if(!isNaN(e.getTime())){const p=String(e.getDate()).padStart(2,"0"),m=String(e.getMonth()+1).padStart(2,"0"),f=e.getFullYear();return`${p}/${m}/${f}`}}catch{return d}return d};return(d,e)=>{const p=n("v-card"),m=n("v-tab"),f=n("v-tabs"),v=n("v-btn"),C=n("v-chip"),y=n("v-alert"),b=n("v-window-item"),D=n("v-window");return c(),_(R,{config:u(g),"table-config":u(h),"item-form":u(k),filters:u(w),"enable-row-detail":!0},{detail:t(({item:a,tab:x,setTab:q,sync:F,close:N})=>[o(p,{flat:"",border:"",class:"pa-3"},{default:t(()=>[l("div",Q,s(a.first_name)+" "+s(a.last_name),1),l("div",W,s(a.email),1),l("div",X," Depto: "+s(a.department?.name||a.department_id),1),l("div",Z," Rol: "+s(a.role?.name||a.role_id),1),l("div",ee," Hired: "+s(S(a.hire_date)),1)]),_:2},1024),l("div",te,[o(f,{"model-value":x,density:"compact",color:"primary","onUpdate:modelValue":q},{default:t(()=>[o(m,{value:"active"},{default:t(()=>[...e[0]||(e[0]=[i("Skills Activas",-1)])]),_:1}),o(m,{value:"history"},{default:t(()=>[...e[1]||(e[1]=[i("Historial",-1)])]),_:1})]),_:1},8,["model-value","onUpdate:modelValue"]),l("div",ae,[o(v,{size:"small",color:"primary",variant:"tonal","prepend-icon":"mdi-sync",onClick:F},{default:t(()=>[...e[2]||(e[2]=[i(" Sincronizar con rol ",-1)])]),_:1},8,["onClick"]),o(v,{size:"small",variant:"text",icon:"mdi-close",onClick:N},null,8,["onClick"])])]),o(D,{"model-value":x,class:"mt-3"},{default:t(()=>[o(b,{value:"active"},{default:t(()=>[a.skills?.length?(c(),_(p,{key:0,flat:"",border:"",class:"pa-3"},{default:t(()=>[e[3]||(e[3]=l("div",{class:"text-subtitle-2 mb-2"},"Skills activas",-1)),l("div",oe,[(c(!0),H(V,null,B(a.skills,r=>(c(),_(C,{key:r.id,size:"small",class:"text-capitalize",color:r.pivot?.current_level>=r.pivot?.required_level?"success":"warning",variant:"tonal"},{default:t(()=>[i(s(r.name)+" ("+s(r.pivot?.current_level)+"/"+s(r.pivot?.required_level)+") ",1)]),_:2},1032,["color"]))),128))])]),_:2},1024)):(c(),_(y,{key:1,type:"info",density:"comfortable",variant:"tonal"},{default:t(()=>[...e[4]||(e[4]=[i(" Sin skills activas en el pivote `people_role_skills`. ",-1)])]),_:1}))]),_:2},1024),o(b,{value:"history"},{default:t(()=>[o(y,{type:"info",density:"comfortable",variant:"tonal"},{default:t(()=>[...e[5]||(e[5]=[i(" Historial no cargado (requiere endpoint de `people_role_skills` inactivos). ",-1)])]),_:1})]),_:1})]),_:2},1032,["model-value"])]),_:1},8,["config","table-config","item-form","filters"])}}}),pe=J(le,[["__scopeId","data-v-d77141bf"]]);export{pe as default};
