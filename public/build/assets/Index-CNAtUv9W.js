import{_ as L}from"./SkillLevelChip.vue_vue_type_script_setup_true_lang-IwqcXRpL.js";import{d as M,_ as T,r as z,o as j,l as G,b as r,g as u,e as i,w as t,f as l,k as a,t as d,j as m,i as w,c as p,F as R,s as D,u as b,m as H}from"./app-BQBzBluS.js";import K from"./FormSchema-MwFFOhwG.js";import"./apiHelper-CL77IM7H.js";import"./index.es-CBox0HgD.js";import"./FormData-C_Q_stz2.js";const O={index:"/api/roles",apiUrl:"/api/roles"},Q="Roles Management",W="View and manage company roles",X={crear:!0,editar:!0,eliminar:!0},Y={endpoints:O,titulo:Q,descripcion:W,permisos:X},Z=[{field:"name",type:"text",label:"Role Name",placeholder:"Search by role name"}],h=[{key:"name",label:"Role Name",type:"text",placeholder:"Enter role name",rules:["required","min:3"]},{key:"description",label:"Description",type:"textarea",placeholder:"Enter role description",rules:["required"]}],ee=[],te={fields:h,catalogs:ee},le=[{text:"Name",value:"name",sortable:!0},{text:"Description",value:"description",sortable:!0},{text:"Skills",value:"skills_count",sortable:!0},{text:"Employees",value:"people_count",sortable:!0},{text:"Actions",value:"actions",sortable:!1}],oe={dense:!1,itemsPerPage:10,showSelect:!1},se={headers:le,options:oe},ae={key:0,class:"py-4 text-center text-secondary"},ne={key:0,class:"py-4 text-center text-secondary"},re={key:0},ie=M({layout:T,__name:"Index",setup(de){const _=z("info"),N=z([]);j(async()=>{try{const o=await G.get("/api/catalogs",{params:{catalogs:["skill_levels"]}});N.value=o.data.skill_levels||[]}catch(o){console.error("Error loading skill levels:",o)}});const S=o=>o?.skills?o.skills.map(e=>({id:e.id,name:e.name,category:e.category,required_level:e.pivot?.required_level||0,is_critical:e.pivot?.is_critical||!1})):[],V=o=>Array.isArray(o?.people)?o.people:[],E=o=>o&&(`${o.first_name||""} ${o.last_name||""}`.trim()||o.name)||"Sin nombre",P=o=>o?.department?.name||o?.department_full_name||o?.department_name||null,F=Y,I=se,$=te,B=Z;return(o,e)=>{const c=r("v-icon"),y=r("v-tab"),J=r("v-tabs"),f=r("v-list-item-title"),v=r("v-list-item"),g=r("v-list"),x=r("v-card"),k=r("v-window-item"),q=r("v-avatar"),A=r("v-chip"),C=r("v-list-item-subtitle"),U=r("v-window");return i(),u(K,{config:b(F),"table-config":b(I),"item-form":b($),filters:b(B),"enable-row-detail":""},{detail:t(({item:n})=>[l(J,{modelValue:_.value,"onUpdate:modelValue":e[0]||(e[0]=s=>_.value=s)},{default:t(()=>[l(y,{value:"info"},{default:t(()=>[l(c,{start:""},{default:t(()=>[...e[2]||(e[2]=[a("mdi-information",-1)])]),_:1}),e[3]||(e[3]=a(" Información ",-1))]),_:1}),l(y,{value:"skills"},{default:t(()=>[l(c,{start:""},{default:t(()=>[...e[4]||(e[4]=[a("mdi-star-circle",-1)])]),_:1}),a(" Skills ("+d(n.skills_count||n.skills?.length||0)+") ",1)]),_:2},1024),l(y,{value:"people"},{default:t(()=>[l(c,{start:""},{default:t(()=>[...e[5]||(e[5]=[a("mdi-account-group",-1)])]),_:1}),a(" Personas ("+d(n.People_count||n.people_count||n.people?.length||0)+") ",1)]),_:2},1024)]),_:2},1032,["modelValue"]),l(U,{modelValue:_.value,"onUpdate:modelValue":e[1]||(e[1]=s=>_.value=s),class:"mt-4"},{default:t(()=>[l(k,{value:"info"},{default:t(()=>[l(x,{flat:"",border:"",class:"pa-3"},{default:t(()=>[e[8]||(e[8]=m("div",{class:"text-subtitle-2 mb-3"}," Información del Rol ",-1)),l(g,{density:"compact"},{default:t(()=>[l(v,null,{default:t(()=>[l(f,{class:"text-body-2"},{default:t(()=>[e[6]||(e[6]=m("strong",null,"Nombre:",-1)),a(" "+d(n.name),1)]),_:2},1024)]),_:2},1024),n.description?(i(),u(v,{key:0},{default:t(()=>[l(f,{class:"text-body-2"},{default:t(()=>[e[7]||(e[7]=m("strong",null,"Descripción:",-1)),a(" "+d(n.description),1)]),_:2},1024)]),_:2},1024)):w("",!0)]),_:2},1024)]),_:2},1024)]),_:2},1024),l(k,{value:"skills"},{default:t(()=>[l(x,{flat:"",border:"",class:"pa-3"},{default:t(()=>[e[12]||(e[12]=m("div",{class:"text-subtitle-2 mb-3"}," Skills requeridas ",-1)),S(n).length===0?(i(),p("div",ae," No hay skills asignadas ")):(i(),u(g,{key:1,density:"compact"},{default:t(()=>[(i(!0),p(R,null,D(S(n),s=>(i(),u(v,{key:s.id,class:"mb-2",border:""},{prepend:t(()=>[l(q,{color:"primary",size:"32"},{default:t(()=>[l(c,{size:"small"},{default:t(()=>[...e[9]||(e[9]=[a("mdi-star-circle",-1)])]),_:1})]),_:1})]),default:t(()=>[l(f,{class:"text-body-2 font-weight-medium"},{default:t(()=>[a(d(s.name),1)]),_:2},1024),l(C,{class:"text-caption"},{default:t(()=>[e[11]||(e[11]=a(" Nivel requerido: ",-1)),l(L,{level:s.required_level,"skill-levels":N.value,color:"black",class:"ml-1",size:"small"},null,8,["level","skill-levels"]),s.is_critical?(i(),u(A,{key:0,size:"small",color:"error",class:"ml-2"},{default:t(()=>[...e[10]||(e[10]=[a(" Crítica ",-1)])]),_:1})):w("",!0)]),_:2},1024)]),_:2},1024))),128))]),_:2},1024))]),_:2},1024)]),_:2},1024),l(k,{value:"people"},{default:t(()=>[l(x,{flat:"",border:"",class:"pa-3"},{default:t(()=>[e[14]||(e[14]=m("div",{class:"text-subtitle-2 mb-3"}," Personas en este rol ",-1)),V(n).length===0?(i(),p("div",ne," No hay personas asignadas ")):(i(),u(g,{key:1,density:"compact"},{default:t(()=>[(i(!0),p(R,null,D(V(n),s=>(i(),u(v,{key:s.id,class:"mb-2",border:""},{prepend:t(()=>[l(q,{color:"secondary",size:"32"},{default:t(()=>[l(c,{size:"small"},{default:t(()=>[...e[13]||(e[13]=[a("mdi-account",-1)])]),_:1})]),_:1})]),default:t(()=>[l(f,{class:"text-body-2 font-weight-medium"},{default:t(()=>[a(d(E(s)),1)]),_:2},1024),l(C,{class:"text-caption"},{default:t(()=>[a(d(s.email?`(${s.email})`:"(Sin correo)")+" ",1),P(s)?(i(),p("span",re," · "+d(P(s)),1)):w("",!0)]),_:2},1024)]),_:2},1024))),128))]),_:2},1024))]),_:2},1024)]),_:2},1024)]),_:2},1032,["modelValue"])]),_:1},8,["config","table-config","item-form","filters"])}}}),ve=H(ie,[["__scopeId","data-v-8b3156fb"]]);export{ve as default};
